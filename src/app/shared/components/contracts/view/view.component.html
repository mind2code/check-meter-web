<app-offfcanvas>
  <ng-container title>
    <ng-container *ngIf="contract$|ngrxPush as contract">
      {{ 'CONTRACT.LABEL.ITEM_DETAILS'|translate:{ reference: '#'+contract.identifiant} }}
      <span [ngbTooltip]="'CONTRACT.FIELD.numeroExterneBail'|translate" *ngIf="contract.numeroExterneBail">
        ({{ contract.numeroExterneBail }})
      </span>
    </ng-container>
  </ng-container>
  <ng-container *ngIf="contract$|ngrxPush as contract">

    <div class="">
      <div class="d-flex flex-row-fluid justify-content-between align-items-start flex-wrap mb-6">
        <div class="d-flex flex-column">
          <div class="fs-6 text-gray-500">{{ 'CONTRACT.FIELD.identifiant'|translate }}</div>
          <div class="fs-7 fw-bolder text-gray-800">{{ contract.identifiant }}</div>
        </div>
        <div class="d-flex flex-column">
          <div class="fs-6 text-gray-500">{{ 'CONTRACT.FIELD.numeroExterneBail'|translate }}</div>
          <div class="fs-5 fw-bolder text-gray-800">
            <span class="badge badge-light-primary">{{ contract.numeroExterneBail }}</span>
          </div>
        </div>
        <div class="d-flex flex-column">
          <div class="fs-6 text-gray-500">{{ 'CONTRACT.FIELD.solde'|translate }}</div>
          <div class="fs-5 fw-bolder text-gray-800">{{ contract.solde|currency }}</div>
        </div>
      </div>

      <hr />

      <div class="table-responsive">
        <table class="table table-row-bordered">
          <tbody>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.FIELD.dateDebutContrat'|translate }}</td>
              <td>{{ contract.dateDebutContrat|date }}</td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.FIELD.dateSignatureContrat'|translate }}</td>
              <td>{{ contract.dateSignatureContrat|date }}</td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.FIELD.dateFinContrat'|translate }}</td>
              <td>{{ contract.dateFinContrat|date }}</td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.FIELD.montantCaution'|translate }}</td>
              <td>{{ contract.montantCaution|currency }}</td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.FIELD.montantAvance'|translate }}</td>
              <td>{{ contract.montantAvance|currency }}</td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.FIELD.montantPasDePorte'|translate }}</td>
              <td>{{ contract.montantPasDePorte|currency }}</td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.RELATIONSHIP.personne'|translate }}</td>
              <td>
                <ng-container *ngIf="contract.personne as person">
                  <span *ngIf="person.identifiant" class="badge badge-secondary me-1" [ngbTooltip]="'PERSON.FIELD.identifiant'|translate">
                    {{ person.identifiant }}
                  </span>
                  <span [ngbTooltip]="'PERSON.FIELD.nomComplet'|translate">
                    {{ person.nomComplet || (person.nom + ' ' + person.prenoms) }}
                  </span>
                </ng-container>
              </td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.RELATIONSHIP.habitation'|translate }}</td>
              <td>
                <ng-container *ngIf="contract.habitation as housing">
                  <span [ngbTooltip]="housing.description + ' [' + housing.localisation + ']'">
                    <span class="badge badge-info">{{ housing.typeHabitation?.libelle }}</span>
                    {{ housing.identifiant }}
                  </span>
                </ng-container>
              </td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'LABEL.NOTIFICATIONS'|translate }}</td>
              <td>
                <ng-container *ngIf="contract.envoiEmail">
                  <span class="badge badge-primary me-1" [ngbTooltip]="'CONTRACT.FIELD.envoiEmail'|translate">
                    {{ 'LABEL.EMAIL'|translate }}
                  </span>
                </ng-container>
                <ng-container *ngIf="contract.envoiSms">
                  <span class="badge badge-success" [ngbTooltip]="'CONTRACT.FIELD.envoiSms'|translate">
                    {{ 'LABEL.SMS'|translate }}
                  </span>
                </ng-container>
              </td>
            </tr>
            <tr class="fw-semibold fs-6">
              <td class="bg-light text-gray-600 mw-85px">{{ 'CONTRACT.FIELD.observation'|translate }}</td>
              <td>{{ contract.observation }}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

  </ng-container>
</app-offfcanvas>
